@{
    ViewData["Title"] = "Login";
}

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<!-- Bootstrap Icons -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">

<style>
    body {
        background: linear-gradient(135deg, #ff4d6d, #c9184a);
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .card {
        border: none;
        border-radius: 20px;
        background-color: #fff;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        transition: transform 0.3s ease;
    }

        .card:hover {
            transform: translateY(-5px);
        }

    .btn-ruby {
        background-color: #c9184a;
        border: none;
        color: #fff;
        transition: background-color 0.3s ease, transform 0.2s;
    }

        .btn-ruby:hover {
            background-color: #a4133c;
            transform: scale(1.03);
        }

    .form-control:focus {
        border-color: #c9184a;
        box-shadow: 0 0 5px rgba(201, 24, 74, 0.4);
    }

    h3 {
        color: #c9184a;
    }

    #msg {
        font-size: 0.95rem;
    }
</style>

<div class="container d-flex justify-content-center align-items-center vh-100">
    <div class="card p-4" style="width: 400px;">
        <div class="text-center mb-4">
            <i class="bi bi-person-circle display-3 text-danger"></i>
            <h3 class="fw-bold mt-2">User Login</h3>
        </div>

        <div class="form-group mb-3">
            <label for="username" class="form-label fw-semibold text-dark">Username</label>
            <input type="text" id="username" class="form-control" placeholder="Enter your username" />
        </div>

        <div class="form-group mb-4">
            <label for="password" class="form-label fw-semibold text-dark">Password</label>
            <input type="password" id="password" class="form-control" placeholder="Enter your password" />
        </div>

        <div class="d-grid">
            <button id="btnLogin" class="btn btn-ruby btn-lg">
                <i class="bi bi-door-open me-2"></i> Login
            </button>
        </div>

        <p id="msg" class="mt-3 text-center fw-bold"></p>
    </div>
</div>

<!-- Bootstrap & jQuery -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<script>
    $("#btnLogin").click(function () {
        var user = {
            username: $("#username").val(),
            password: $("#password").val()
        };

        if (!user.username || !user.password) {
            $("#msg").text("⚠️ Please enter both username and password")
                .addClass("text-danger").removeClass("text-success");
            return;
        }

        $.ajax({
            url: "https://localhost:7243/api/Account",
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify(user),
            success: function (response) {
                localStorage.setItem("jwtToken", response.token);
                $("#msg").text("✅ Login successful! Redirecting...")
                    .addClass("text-success").removeClass("text-danger");

                setTimeout(() => {
                    window.location.href = "/Student/Index";
                }, 1200);
            },
            error: function () {
                $("#msg").text("❌ Invalid credentials")
                    .addClass("text-danger").removeClass("text-success");
            }
        });
    });
</script>
